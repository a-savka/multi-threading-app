# Отчет по домашнему заданию №10

## Описание задания

В рамках задания было необходимо разработать приложение, которое асинхронно получает данные из нескольких источников, объединяет их и обрабатывает возможные ошибки.

## Этапы выполнения

### 1. Настройка проекта
- Был настроен проект Spring Boot в папке `webinar-10-app`.
- Создан файл `products.csv` для имитации внешнего источника данных о товарах.

### 2. Реализация сервисов
- `ProductService`: Сервис для получения информации о товарах из CSV файла с имитацией задержки.
- `CurrencyRateService`: Сервис для получения курса валют. В сервис встроена имитация задержки и случайных ошибок для демонстрации отказоустойчивости.

### 3. Реализация асинхронной логики
- В главном классе `Webinar10Application` был реализован метод `fetchAllDataAsync`.
- Для каждого идентификатора товара асинхронно запускаются две задачи: одна для получения данных о товаре, другая — для получения курса валют.
- Для выполнения задач используется кастомный `ExecutorService` с именованными демон-потоками.
- `CompletableFuture.thenCombine` используется для объединения результатов двух независимых задач.
- `CompletableFuture.exceptionally` применяется для обработки ошибок, что позволяет продолжить работу даже при сбое одной из задач.

### 4. Сравнение с синхронным подходом
- Был реализован метод `fetchAllDataSync` для сравнения производительности.
- В `CommandLineRunner` производится замер времени выполнения обоих подходов и вывод результатов в консоль.

## Промежуточные результаты

Приложение успешно запускается, выполняет обе версии (синхронную и асинхронную), выводит результаты и разницу во времени выполнения. Асинхронная версия показывает значительный прирост производительности за счет параллельного выполнения I/O-операций (имитация сетевых запросов).

Пример вывода:

```
--- Запуск синхронного выполнения ---
Синхронное выполнение заняло: 2765 мс
Результат:
-------------------------------------------------
| Название             | Цена (USD) | Цена (RUB) |
-------------------------------------------------
| Молоко               | 1.50       | 138.75     |
| Хлеб                 | 0.80       | 74.00      |
| ...                  | ...        | ...        |
-------------------------------------------------

--- Запуск асинхронного выполнения ---
Асинхронное выполнение заняло: 471 мс
Результат:
-------------------------------------------------
| Название             | Цена (USD) | Цена (RUB) |
-------------------------------------------------
| Молоко               | 1.50       | 138.75     |
| Хлеб                 | 0.80       | 74.00      |
| ...                  | ...        | ...        |
-------------------------------------------------
```

## Итоговые выводы

Использование `CompletableFuture` и кастомного `ExecutorService` позволило эффективно распараллелить задачи, связанные с ожиданием ответа от внешних источников. Это привело к значительному сокращению времени выполнения по сравнению с последовательным синхронным подходом. Обработка ошибок на уровне каждой задачи обеспечила отказоустойчивость всей операции.